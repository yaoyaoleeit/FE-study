<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>https://blog.csdn.net/qq_43000315/article/details/125361625</title>
</head>
<body>
<input type="text" id="inp">
<script>

    // 1.封装防抖函数 **防抖重在清零 clearTimeout(timer)**
    function debounce(fn, time) {
        // 4.创建一个标记用来存放定时器的返回值
        let timeout = null;
        return function () {
            console.log("aaa")
            // 5.每当用户触发input事件  把前一个 setTimeout 清楚掉
            clearTimeout(timeout);
            // 6.然后又创建一个新的 setTimeout, 这样就能保证输入字符后等待的间隔内 还有字符输入的话，就不会执行 setTimeout里面的内容
            timeout = setTimeout(() => {
                // 7.这里进行防抖的内容
                fn();
            }, time);
        };
    }

    // 2.获取inpt元素
    var inp = document.getElementById('inp');
    // 8. 测试防抖临时使用的函数
    function sayHi() {
        console.log('防抖成功');
    }
    // 3.给inp绑定input事件  调用封装的防抖函数  传入要执行的内容与间隔事件
    inp.addEventListener('input', debounce(sayHi, 5000));

</script>
<!--<script>-->
<!--    function debounce(fn, time) {-->
<!--        let timeout = null-->
<!--        return function () {-->
<!--            clearTimeout(timeout)-->
<!--            timeout = setTimeout(function () {-->
<!--                fn()-->
<!--            }, time)-->
<!--        }-->
<!--    }-->
<!--</script>-->
</body>

</html>